version: '3.8'

services:
  qq-farm:
    build: .
    image: qq-farm:latest
    container_name: qq-farm-bot
    restart: unless-stopped
    
    # 挂载配置文件（可选，如果使用环境变量可以不挂载）
    volumes:
      - ./config.json:/app/config.json:ro
      # 如果需要使用 share.txt，取消下面的注释
      # - ./share.txt:/app/share.txt:ro
    
    # 环境变量配置（优先级高于配置文件）
    environment:
      - TZ=Asia/Shanghai
      - NODE_ENV=production
      
      # 登录配置（二选一）
      # - QQ_CODE=你的QQ登录code
      # - WX_CODE=你的微信登录code
      # - PLATFORM=qq  # 或 wx
      
      # 企业微信通知（可选）
      # - WECOM_WEBHOOK=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=你的key
      # - NOTIFICATION_ENABLED=true
      
      # 好友黑名单（可选）
      # 单个好友: FRIEND_BLACKLIST=1118181882
      # 多个好友: FRIEND_BLACKLIST=1118181882,987654321,张三
      # JSON格式: FRIEND_BLACKLIST=[1118181882,987654321]
      # 禁用所有: FRIEND_BLACKLIST=all
      # - FRIEND_BLACKLIST=1118181882,987654321
      # - DISABLE_ALL_FRIEND_CHECK=false
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # 网络配置
    network_mode: bridge
