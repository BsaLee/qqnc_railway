version: '3.8'

# 使用环境变量的 docker-compose 配置示例
# 使用方法：
#   1. 复制 .env.example 为 .env
#   2. 编辑 .env 填写配置
#   3. 运行: docker-compose -f docker-compose.env.yml up -d

services:
  qq-farm:
    build: .
    image: qq-farm:latest
    container_name: qq-farm-bot
    restart: unless-stopped
    
    # 使用 .env 文件中的环境变量
    env_file:
      - .env
    
    # 也可以直接在这里设置环境变量（会覆盖 .env 文件）
    environment:
      - TZ=Asia/Shanghai
      - NODE_ENV=production
    
    # 日志配置
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    # 网络配置
    network_mode: bridge

# 多账号示例
  qq-farm-account2:
    image: qq-farm:latest
    container_name: qq-farm-bot-2
    restart: unless-stopped
    
    # 第二个账号使用不同的环境变量
    environment:
      - TZ=Asia/Shanghai
      - NODE_ENV=production
      - QQ_CODE=${QQ_CODE_2}
      - PLATFORM=qq
      - WECOM_WEBHOOK=${WECOM_WEBHOOK}
      - FRIEND_BLACKLIST=${FRIEND_BLACKLIST_2}
    
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    
    network_mode: bridge
